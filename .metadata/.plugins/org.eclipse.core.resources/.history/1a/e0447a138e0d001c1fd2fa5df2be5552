/*
 ============================================================================
 Name        : tp_laboratorio_1.c
 Author      : Juan Manuel Garcia
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>

#include "matematica.h"
#include "accionesCalculadora.h"

int main(void) {
	setbuf(stdout, NULL);

	float numeroUno;
	float numeroDos;

	float resultadoSuma;
	float resultadoResta;
	float resultadoDivision;
	float resultadoMultiplicacion;

	int factorialA;
	int factorialB;

	int opcionElejida;

	char boolIngresoOperandoUno;
	char boolIngresoOperandoDos;

	char boolCalculoResultados;
	char boolCalculoDivision;
	char boolCalculoFactorialA;
	char boolCalculoFactorialB;

	boolIngresoOperandoUno = 0;
	boolIngresoOperandoDos = 0;

	boolCalculoResultados = 0;
	boolCalculoDivision = 0;
	boolCalculoFactorialA = 0;
	boolCalculoFactorialB = 0;

	printf("Bienvenidos a la CALCULADORA \n\n");

	do
	{
		//Mostrar Menu
		printf("Opciones: \n");

		if(boolIngresoOperandoUno)
		{
			printf("1. Ingresar 1er operando (A = %.2f) \n", numeroUno);
		}
		else
		{
			printf("1. Ingresar 1er operando (A = x) \n");
		}

		if(boolIngresoOperandoDos)
		{
			printf("2. Ingresar 2do operando (B = %.2f) \n", numeroDos);
		}
		else
		{
			printf("2. Ingresar 2do operando (B = x) \n");
		}

		printf("3. Calcular: \n"
				"	-La suma A + B \n"
				"	-La resta A - B \n"
				"	-La division A / B \n"
				"	-La multiplicacion A * B \n"
				"	-El factorial A! \n"
				"	-El factorail B! \n"
				"4. Mostrar Resultados \n"
				"5. Salir del Programa \n\n");

		//Pedir que el usuario elija una opcion

		opcionElejida = PedirOpcion(1, 5);

		//continuar segun la opcion elejida por el usuario

		switch(opcionElejida)
		{
			case 1:
				numeroUno = PedirNumero("Ingrese el 1er operando: ");
				boolIngresoOperandoUno = 1;
				boolCalculoResultados = 0;
				break;

			case 2:
				numeroDos = PedirNumero("Ingrese el 2do operando: ");
				boolIngresoOperandoDos = 1;
				boolCalculoResultados = 0;
				break;

			case 3:
				if(boolIngresoOperandoUno && boolIngresoOperandoDos)
				{
					resultadoSuma = Sumar(numeroUno, numeroDos);
					resultadoResta = Restar(numeroUno, numeroDos);

					if(numeroDos != 0)
					{
						resultadoDivision = Dividir(numeroUno, numeroDos);
						boolCalculoDivision = 1;
					}

					resultadoMultiplicacion = Multiplicar(numeroUno, numeroDos);

					if(numeroUno - (int) numeroUno == 0)
					{
						factorialA = Factorial(numeroUno);
						boolCalculoFactorialA = 1;
					}

					if(numeroDos - (int)numeroDos == 0)
					{
						factorialB = Factorial(numeroDos);
						boolCalculoFactorialB = 1;
					}

					boolCalculoResultados = 1;
				}
				else
				{
					printf("\nERROR. No se puede calcular sin antes ingresar operando 1 y 2\n");
				}
				break;

			case 4:
				if(boolCalculoResultados)
				{
					printf("RESULTADOS: \n");
					//Resultado Suma
					printf("La suma %.2f + %.2f es: %.2f \n", numeroUno, numeroDos, resultadoSuma);

					//Resultado Resta
					printf("La resta %.2f - %.2f es: %.2f \n", numeroUno, numeroDos, resultadoResta);

					//Resultado Division
					if(boolCalculoDivision)
					{
						printf("La division %.2f / %.2f es: %.2f \n", numeroUno, numeroDos, resultadoDivision);
					}
					else
					{
						printf("No se puede dividir un numero por 0 \n");
					}

					//Resultado Multiplicacion
					printf("La multiplicacion %.2f * %.2f es: %.2f \n", numeroUno, numeroDos, resultadoMultiplicacion);

					//Resultado Factorial A
					if(boolCalculoFactorialA)
					{
						printf("El factorial %.2f es: %d \n", numeroUno, factorialA);
					}
					else
					{
						printf("El factorial de %.2f: No se puede calcular el factorial de un numero con decimales \n" , numeroUno);
					}

					//Resultado Factorial B
					if(boolCalculoFactorialB)
					{
						printf("El factorial %.2f es: %d \n", numeroDos, factorialB);
					}
					else
					{
						printf("El factorial de %.2f: No se puede calcular el factorial de un numero con decimales \n" , numeroDos);
					}


					//Resetear Calculadora
					boolIngresoOperandoUno = 0;
					boolIngresoOperandoDos = 0;

					boolCalculoResultados = 0;
					boolCalculoDivision = 0;
					boolCalculoFactorialA = 0;
					boolCalculoFactorialB = 0;
				}
				else
				{
					printf("\nERROR. No se puede mostrar resultados sin antes calcularlos \n");
				}
				break;

			case 5:
				printf("\nFINALIZAR EL PROGRAMA\n");
				break;
		}

	} while(opcionElejida != 5);

	return EXIT_SUCCESS;
}
